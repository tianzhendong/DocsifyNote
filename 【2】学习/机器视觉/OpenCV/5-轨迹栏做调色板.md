## 轨迹栏作为调色板

[toc]

### 创建轨迹栏

函数：

```c
int createTrackbar(const String& trackbarname, const String& winname,
                              int* value, int count,
                              TrackbarCallback onChange = 0,
                              void* userdata = 0);
```

参数：

- trackbarname：轨迹栏名称
- winname：窗口
- value：指向滑块位置的整形指针
- count：滑块的最大位置。最小的位置总是0
- onChange：滑块值改变时时要调用的函数。默认为0，可选
- userdata：按原样传递给回调函数的用户数据。默认为0，可选

### 获取轨迹栏值

函数：

```c
int getTrackbarPos(const String& trackbarname, const String& winname);
```

参数

- trackbarname：轨迹栏名称
- winname：窗口

### 实例

注意，OpenCV中使用的是GBR(蓝绿红)

> 代码

```c
#include <QCoreApplication>
#include "opencv2/opencv.hpp"
#include "trackbar.h"
using namespace cv;

int main(int argc, char *argv[])
{
    QCoreApplication a(argc, argv);
    Mat src = imread("./../../images/book.bmp");
    namedWindow("img");
    //创建指向滑块位置的整形指针
    int *p1 = nullptr;
    int *p2 = nullptr;
    int *p3 = nullptr;
    //创建轨迹栏
    createTrackbar("R","img",p1,255);
    createTrackbar("G","img",p2,255);
    createTrackbar("B","img",p3,255);
    while (1) {
        imshow("img",src);
        if(waitKey(20) == 27){   //esc键退出
            break;
        }
        //获取轨迹当前位置
        int r = getTrackbarPos("R","img");
        int g = getTrackbarPos("G","img");
        int b = getTrackbarPos("B","img");

        //画实心圆
        //注意，R,G,B分别代表红、绿、蓝，OpenCV中使用的是GBR
        circle(src,Point(100,100),100,Scalar(b,g,r),-1);
    }

    destroyAllWindows();

    return 0;
}
```

> 效果



<center>
    <img src=https://gitee.com/tianzhendong/img/raw/master//images/202202211432588.gif width=50%>
    <br>
    轨迹条
</center>

