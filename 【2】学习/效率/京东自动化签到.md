[toc]

# 京东自动化签到脚本详解【转载】

[blog.csdn.net](https://blog.csdn.net/nsurl/article/details/109691650?spm=1001.2101.3001.6650.3&utm_medium=distribute.pc_relevant.none-task-blog-2%7Edefault%7ECTRLIST%7ERate-3.pc_relevant_paycolumn_v3&depth_1-utm_source=distribute.pc_relevant.none-task-blog-2%7Edefault%7ECTRLIST%7ERate-3.pc_relevant_paycolumn_v3&utm_relevant_index=6)

[查看原网页: blog.csdn.net](https://blog.csdn.net/nsurl/article/details/109691650?spm=1001.2101.3001.6650.3&utm_medium=distribute.pc_relevant.none-task-blog-2%7Edefault%7ECTRLIST%7ERate-3.pc_relevant_paycolumn_v3&depth_1-utm_source=distribute.pc_relevant.none-task-blog-2%7Edefault%7ECTRLIST%7ERate-3.pc_relevant_paycolumn_v3&utm_relevant_index=6)

> 双十一刚刚过，相信很多小伙伴也都剁手了。今年电商平台同样给出了很多优惠。有些优惠，比如红包，是靠运气来获得的，但是还有一些优惠是靠长期坚持才能获得。比如：签到、东东萌宠。每天都能坚持签到固然很棒，但是如果有脚本可以自动签到，那岂不是更美？

[自动签到脚本](https://github.com/Johnson8888/jd_sign_bot)此脚本涵盖了目前京90%以上的签到任务，我们只需要简单配置，每天定时触发，就可以签到，领奖品了。而且都是**免费的**。

## 运行环境

*   node.js
*   Server酱(可选)

## 获取京东Cookie

这里以`Chrome`浏览器为例，`Edge`、`360浏览器`、`QQ浏览器`同样支持。

*   打开Chrome浏览的隐私模式，输入[https://m.jd.com/](https://m.jd.com/)。
*   按下键盘上的`F12`进入调试模式，选择手机模式。-
    ![image-20220220122525990](https://gitee.com/tianzhendong/img/raw/master//images/image-20220220122525990.png)

如果没有登录就使用`手机验证码`方式登录(已登录，可忽略)，使用验证码登录获取的`cookie`有效时长30天左右，存活时间更长。

*   登录成功后，点击`Network`-
    ![image-20220220122537494](https://gitee.com/tianzhendong/img/raw/master//images/image-20220220122537494.png)

然后点击箭头所指的这个按钮清理一下，因为网络请求太多了，不方便查看。-
![image-20220220122554413](https://gitee.com/tianzhendong/img/raw/master//images/image-20220220122554413.png)-
清理完了之后，点击一下`我的`。

![image-20220220122613228](https://gitee.com/tianzhendong/img/raw/master//images/image-20220220122613228.png)-
这个时候我们找到一个`log.gif?`开头的请求，点击它，就可以看到`cookie`字段了。-
![image-20220220122625094](https://gitee.com/tianzhendong/img/raw/master//images/image-20220220122625094.png)

*   这样复制出来的cookie比较长，我们只需要`pt_pin=xxxx;`和 `pt_key=xxxx;`部分的内容即可(注:英文引号`;`是必要的)。-
    可以用下面的脚本，直接在`console`里面输入下面脚本按`enter`回车键。

    var CV = '单引号里面放上面拿到的cookie';
    var CookieValue = CV.match(/pt_pin=.+?;/) + CV.match(/pt_key=.+?;/);
    copy(CookieValue);
    
    ​    

这样子整理出关键的的cookie已经在你的剪贴板上，可直接粘贴。-
我们先把它保存好，下面的步骤要用到。

## 配置 Server酱

[Server酱](http://sc.ftqq.com/3.version)是一个免费的，可以推送消息到我们微信的服务。-
推送服务可以帮助我们每天观察签到的情况，如果出错了，可以及时调整。如果有的小伙伴不需要，可忽略这个步骤，直接进入下一步。

*   打开主页 [http://sc.ftqq.com/3.version](http://sc.ftqq.com/3.version)，点击右上角`登入`-
    ![image-20220220122635741](https://gitee.com/tianzhendong/img/raw/master//images/image-20220220122635741.png)
*   使用Github 授权，登录。-
    输入账号密码即可。
*   登录成功后点击`微信推送`并扫描二维码绑定微信
*   使用手机打开微信，扫描屏幕上的二维码，如果未关注，先关注，然后再绑定即可。-
    ![image-20220220122643712](https://gitee.com/tianzhendong/img/raw/master//images/image-20220220122643712.png)
*   绑定成功后，点击右上方的`发送消息`链接，就可以看到你自己的 `key`值，保存下来，后面会用到。-
    ![image-20220220122700394](https://gitee.com/tianzhendong/img/raw/master//images/image-20220220122700394.png)-
    当然你也可以在下面的`在线发送工具`测试推送是否生效。

## 配置本地代码

*   使用`git clone`命令将[https://github.com/Johnson8888/jd\_sign\_bot](https://github.com/Johnson8888/jd_sign_bot)代码下载下来。
    
*   下载完成后，我们需要安装项目所需要的依赖。使用命令行工具(Mac下使用`Termainal`,Windows下使用`PowerShell`)进入到`jd_sign_bot`文件内。在命令行内输入 `npm install --dependencies`，等待运行完成。-
    ![image-20220220122709072](https://gitee.com/tianzhendong/img/raw/master//images/image-20220220122709072.png)-
    此时，项目文件夹内会多出一个 `node_modules`文件夹。
    
*   配置Cookies-
    打开文件内的`JD_DailyBonus.js`文件，修改`Key`参数为刚刚获取到的cookies-
    ![image-20220220122718342](https://gitee.com/tianzhendong/img/raw/master//images/image-20220220122718342.png)
    
*   配置Server酱-
    打开文件内的`app.js`文件，修改`serverJ`参数为刚刚获取到的Server酱的key-
    ![image-20220220122727259](https://gitee.com/tianzhendong/img/raw/master//images/image-20220220122727259.png)

## 执行签到

进入到`jd_sign_hot`文件夹下，执行 `node app.js`即可签到！-
![image-20220220122733906](https://gitee.com/tianzhendong/img/raw/master//images/image-20220220122733906.png)-
此时我们的脚本在本地就已经部署好了，如果你想更编辑，可以把代码部署到云服务器上，这样就不需要每天点击触发了。-
或者你也可以部署在自己的服务器上，每天定时执行。

## 你也可以 将脚本部署在腾讯云 · 云函数 上

去到[腾讯云函数地址](https://console.cloud.tencent.com/scf/index)，如果没有开通此服务的顺手开一下就可以了。

*   单击左侧导航栏函数服务，进入**函数服务**页面。 在页面上方选择一个地域，最好选择离你常用地区近点的，不至于导致账号异常。单击**新建**。如下图所示：-
    ![image-20220220122742531](https://gitee.com/tianzhendong/img/raw/master//images/image-20220220122742531.png)
    
*   在**新建函数**页面填写函数基础信息，单击下一步。如下图所示：-
    ![image-20220220122752969](https://gitee.com/tianzhendong/img/raw/master//images/image-20220220122752969.png)
    
*   函数名称：可以自定义，比如为`jd_sign`。 运行环境：选择 `Nodejs 12.16`。 创建方式：选择 `空白函数`。-
    确保环境为`Nodejs 12.16`，执行方法改为：`index.main_handler`，提交方式建议选本地文件夹。
    
*   然后将刚才下载并配置好的文件夹`jd_sign_bot`上传上来。（记得node\_modules文件夹一并上传），完了后点击下面的高级设置。-
    ![image-20220220122802057](https://gitee.com/tianzhendong/img/raw/master//images/image-20220220122802057.png)
    
*   内存用不了太大，64MB就够了（64M内存，免费时长6,400,000秒，内存与免费时长大致关系可以参看云函数官方说明），超时时间改为最大的900秒，然后点击最下面的完成。
    

![image-20220220122812335](https://gitee.com/tianzhendong/img/raw/master//images/image-20220220122812335.png)

*   点击刚创建的函数

![image-20220220122825815](https://gitee.com/tianzhendong/img/raw/master//images/image-20220220122825815.png)

点击`创建触发器`

![image-20220220122833148](https://gitee.com/tianzhendong/img/raw/master//images/image-20220220122833148.png)

比如我填写的是 `0 45 8 * * * *`，每天上午8点45触发一次。-
腾讯云提供了相关配置[Cron的文档](https://cloud.tencent.com/document/product/583/9708#cron-.E8.A1.A8.E8.BE.BE.E5.BC.8F)，也有第三方[测试工具](https://tool.lu/crontab/)。

## 测试一下

我们打开刚才创建的云函数，点击`保存并测试`，等过1分钟左右手机上收到推送，那我们的配置就是成功的。-
如果没有收到推送，可以点击`日志查看`排查问题。-
![image-20220220122841752](https://gitee.com/tianzhendong/img/raw/master//images/image-20220220122841752.png)

如果你不喜欢腾讯云的服务-
我们可以参考[ruicky大神的博客](https://ruicky.me/2020/06/05/jd-sign/)，将脚本部署在Github Actions上面也是也可以的。

[查看原网页: blog.csdn.net](https://blog.csdn.net/nsurl/article/details/109691650?spm=1001.2101.3001.6650.3&utm_medium=distribute.pc_relevant.none-task-blog-2%7Edefault%7ECTRLIST%7ERate-3.pc_relevant_paycolumn_v3&depth_1-utm_source=distribute.pc_relevant.none-task-blog-2%7Edefault%7ECTRLIST%7ERate-3.pc_relevant_paycolumn_v3&utm_relevant_index=6)